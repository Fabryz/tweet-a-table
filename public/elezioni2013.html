<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Elezioni 2013 | Tweet-a-Table</title>

  <meta property="og:image" content="./img/twitter-bird-white-on-blue.png"/>
  <meta property="og:description"
        content="Twitter hashcounts visualization for the 2013 Italian Elections event"/>
  
  <script type="text/javascript" src="./js/jquery-1.7.2.min.js"></script>

<script type="text/javascript">

$(function () {
    function generateGraph(options) {
        return new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'line',
                marginRight: 130,
                marginBottom: 25
            },
            title: {
                text: 'Elezioni 2013 Hashcount',
                x: -20 //center
            },
            subtitle: {
                text: 'Source: Twitter.com',
                x: -20
            },
            xAxis: {
                categories: options.categories
            },
            yAxis: {
                title: {
                    text: 'Number of Tweets'
                },
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
            },
            tooltip: {
                formatter: function() {
                        return '<b>'+ this.series.name +'</b><br/>'+
                        this.x +': '+ this.y +' tweets';
                }
            },
            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'top',
                x: -10,
                y: 100,
                borderWidth: 0
            },
            series: options.series
        });

    }

    var chart;
    $(document).ready(function() {
        $.ajax({
            type: 'GET',
            url: '/graph.json',
            dataType: 'json',
            success: function(data) {
                var graphData = data.graph;

                chart = generateGraph({ series: graphData.series, categories: graphData.categories });

                console.log(JSON.stringify(graphData));
            },
            error: function(XMLHttpRequest, textStatus, errorThrown) { 
               console.log('Error: '+ textStatus +': '+ errorThrown);
            }
        });
    });

});

</script>

</head>
<body>

    <div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
  
    <script src="http://code.highcharts.com/highcharts.js"></script>
    <script src="http://code.highcharts.com/modules/exporting.js"></script>

<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style " style="margin-top: 20px;">
  <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
  <a class="addthis_button_tweet"></a>
  <a class="addthis_button_pinterest_pinit"></a>
  <a class="addthis_counter addthis_pill_style"></a>
</div>
<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4f149a4f2cd61cbc"></script>
<!-- AddThis Button END -->

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32693789-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</body>
</html>